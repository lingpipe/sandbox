<?xml version="1.0" encoding="ASCII"?>
<project>

  <property name="version"
            value="4.0"/>

  <property name="jar"
            value="build/lp-book-naive-bayes-${version}.jar"/>

  <path id="classpath">
    <pathelement location="${jar}"/>
    <pathelement location="../../lib/ant-1.8.1.jar"/>  <!-- for tar parsing -->
    <pathelement location="../../lib/lingpipe-4.0.1.jar"/>
  </path>

  <target name="clean">
    <delete dir="build"/>
  </target>

  <target name="jar">
    <mkdir dir="build/classes"/>
    <javac debug="yes"
           debuglevel="source,lines,vars"
           destdir="build/classes"
           includeantruntime="false">
      <compilerarg value="-Xlint:all"/>
      <classpath refid="classpath"/>
      <src path="src/"/>
    </javac>
    <jar destfile="${jar}">
      <fileset dir="build/classes"
               includes="**/*.class"/>
    </jar>
  </target>

  <property name="text" value="hardy haw haw"/>
  <target name="nb-demo"
          depends="jar">
    <java classname="com.lingpipe.book.naivebayes.TradNbDemo"
          classpathref="classpath"
          fork="true">
      <arg value="${text}"/>
    </java>
  </target>

  <target name="cat-skew"
          depends="jar">
    <java classname="com.lingpipe.book.naivebayes.CatSkew"
          classpathref="classpath"
          fork="true">
      <arg value="${text}"/>
    </java>
  </target>

  <target name="additive-smooth"
          depends="jar">
    <java classname="com.lingpipe.book.naivebayes.AdditiveSmooth"
          classpathref="classpath"
          fork="true">
    </java>
  </target>

  <target name="item-weight"
          depends="jar">
    <java classname="com.lingpipe.book.naivebayes.ItemWeighting"
          classpathref="classpath"
          fork="true">
    </java>
  </target>


  <property name="length.norm" value="1.0"/>
  <target name="length-norm"
          depends="jar">
    <java classname="com.lingpipe.book.naivebayes.LengthNorm"
          classpathref="classpath"
          fork="true">
      <arg value="${text}"/>
      <arg value="${length.norm}"/>
    </java>
  </target>

  <property name="file" value="temp.JointClassifier"/>
  <target name="serialize-compile"
          depends="jar">
    <java classname="com.lingpipe.book.naivebayes.SerializeCompile"
          classpathref="classpath"
          fork="true">
      <arg value="${text}"/>
      <arg value="${file}"/>
    </java>
  </target>


  <property name="20-news-file" value="../../data-dist/20news-bydate.tar.gz"/>
  <target name="20-news-corpus"
          depends="jar">
    <java classname="com.lingpipe.book.naivebayes.Nb20NewsCorpus"
          classpathref="classpath"
          fork="true">
      <arg value="${20-news-file}"/>
    </java>
  </target>

  <property name="20-news-file" value="../../data-dist/20news-bydate.tar.gz"/>
  <property name="cat-prior" value="1.0"/>
  <property name="tok-prior" value="0.1"/>
  <property name="length-norm" value="10.0"/>
  <property name="random-seed" value="42"/>
  <target name="20-news-xval"
          depends="jar">
    <java classname="com.lingpipe.book.naivebayes.TwentyNewsXvalDemo"
          classpathref="classpath"
          fork="true">
      <arg value="${20-news-file}"/>
      <arg value="${cat-prior}"/>
      <arg value="${tok-prior}"/>
      <arg value="${length-norm}"/>
      <arg value="${random-seed}"/>
    </java>
  </target>

  <target name="run"
          depends="nb-demo,
                   cat-skew,
                   additive-smooth,
                   item-weight,
                   length-norm,
                   serialize-compile,
                   20-news-corpus"/>


</project>